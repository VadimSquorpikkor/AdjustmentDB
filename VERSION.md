# AdjustmentDB   

* <b>1.90 - 04/02/22</b>
1. В Casher добавлены методы для сохранения локаций и комплектов устройств, дополнены соответственно методы в FireDBHelper
* <b>1.89 - 04/02/22</b>
1. Если запустить поиск устройств по БД и если список найденых будет не пустым, то нажатие кнопки "Назад" теперь очищает список найденых, раньше вызывал диалог закрытия приложения.
* <b>1.88 - 01/02/22</b>
1. Поменял StartActivityForResult на Launcher
* <b>1.87 - 27/01/22</b>
1. Исправлено: если в диалоге ввода параметров на вкладке "Подробно" добавить параметры, затем переключиться на вкладку "Кратко" и выбрать статус, то не сохранялся статус и текущая локация.
2. targetSDK с 30 до 31 (до последнего). Обновлены все импорты
* <b>1.86 - 27/01/22</b>
1. Исправлено: если в диалоге ввода параметров на вкладке "Подробно" добавить параметры, затем переключиться на вкладку "Кратко" и выбрать статус, то сохранялся только статус, введенные параметры на вкладке "Подробно" игнорировались. Теперь при таком варианте ввода сохраняются и статус, и параметры с вкладки "Подробно"
* <b>1.85 - 17/01/22</b>
1. Если локация — это регулировка или группа сервиса, то показываются вкладки выбора типа диалога: кратко или подробно, иначе — доступен только краткий режим. Другими словами для пользователей не с участка регулировки или сервиса не будет доступен расширенный режим диалога (эти пользователи могут выбирать только статус для устройства). Также для пользователей не с регулировки или сервиса не будет доступна кнопка для открытия распознавания текста с наклейки
* <b>1.84 - 10/01/22</b>
1. Исправлена ошибка при кэшировании. Сохранение в кэш запускалось в конце метода получения данных, теперь — в последнем шаге цикла (получение идет в несколько потоков, поэтому выполнение метода заканчивается раньше, чем цикл внутри этого метода)
* <b>1.83 - 05/01/22</b>
1. Исправлено: при добавлении устройства в БД <em>через диалог "Кратко"</em> устройству не присваивалась дата добавления
* <b>1.82 - 03/01/22</b>
1. Исправлено: для синглСкана при успешном сканировании если нажать "назад" чтобы открыть окно сканирования, то сканирования уже не происходит (возможно qr код считается уже найденным ранее), приходилось переходить на фрагмент поиска, а затем снова открывать окно сканирования
* <b>1.81 - 01/01/22</b>
1. Исправлена ошибка повторного открытия диалога ввода параметров для результатов одиночного сканирования
* <b>1.80 - 28/12/21</b>
1. Классы Bridge, Dictionary
* <b>1.80 - 21/12/21</b>
1. Исправлено: повторное открытие диалога параметров после поворота устройства
2. Исправлено: теперь после запуска диалога ввода параметров (после успешного сканирования) surface для камеры скрывается (Visible.GONE) (и для мульти и для сингла)
* <b>1.79 - 21/12/21</b>
1. Исправлено: При вызове диалога SingleScan, unit определялся, как null, поэтому в диалоге не были доступны поля для ввода новых параметров.
2. Добавлен Casher, теперь данные для devices и версия БД сохраняются на устройстве; при подключении к БД проверяется версия БД на firebase, и, если версия на устройстве < версии на FB, то скачиваются новые данные, иначе используются данные сохраненные на устройстве
3. Добавлен PreferenceManager.setDefaultValues для инициализации настроек по умолчанию при первом запуске
4. По умолчанию включена настройка "Автостарт ввода параметров"
5. По умолчанию в диалоге ввода параметров включена вкладка "Кратко"
* <b>1.78 - 26/10/21</b>
1. Исправлено: при открытии диалога SelectStateDialogSingle при включенной опции "Автостарт ввода параметров" диалог показывал пустое устройство (без данных)
* <b>1.77 - 18/10/21</b>
1. Исправлено: теперь при добавлении события "Отправлено" или "Выдано" это событие сразу же закрывается. Рраньше закрывался только unit, т.е. когда ремонт был завершен, счетчик последнего события продолжал считать дни
* <b>1.76 - 01/10/21</b>
1. На пустые мульти и сингл фрагменты (во время, когда пользователь не зарегистрирован) добавлены картинки
* <b>1.75 - 28/09/21</b>
1. Рефакторинг
2. Исправлена ошибка невключения камеры и незапуска аккаунта, если выбрана вкладка по умолчанию "Мультискан" или "Синглскан"
3. Подправлена логика проверки аккаунта и выбора текущей локации
4. MultiScanParent и SingleScanParent теперь запускают фрагмент сканера, если canWork==true и отключают его, если canWork==false. Проверку в initialiseDetectorsAndSources() удалил за ненадобностью
* <b>1.74 - 24/09/21</b>
1. Переделана логика UnitAdapter и UnitInfoFragment, теперь при клике по элементу ресайкла адаптер сразу возвращает объект DUnit, а не позицию в списке
2. Переделаны все адаптеры и связанные с ними фрагменты и диалоги, было: ресайклер не обновлялся при получении новых данных, а пересоздавался
* <b>1.73 - 23/09/21</b>
1. Исправлено: не работал поиск по комплектам (игнорировался)
2. Исправлено: после того как введены данные устройства КРОМЕ TRACK ID, при последующем сканировании в диалоге не было опции добавить TrackId (как если бы он БЫЛ введен)
3. Для диалога SingleScanFragment теперь при количестве дней в работе 0 отображается "<1"
* <b>1.72 - 22/09/21</b>
1. Исправлено: после каждого поворота устройства выскакивал диалог выбора аккаунта
2. Исправлено: после каждого поворота устройства перезагрузка всех списков из БД
3. Исправлена работа входа в аккаунт, теперь диалог выбора аккаунта появляется только если пользователь ранее не был выбран (т.е. при первом запуске приложения). При последующих запусках автоматом выбирается ранее использовавшийся пользователь
* <b>1.71 - 21/09/21</b>
1. Все спиннеры (выпадающие списки) при выборе теперь разворачиваются на весь экран (dialogMode). Исправлены стили для спиннеров. Если список спиннера пустой, то добавлять "-любой-" в спиннерах не нужно
2. Переписана логика авторизации. Теперь пользователь без зарегистрированного аккаунта не сможет ничего сделать в программе (ни запись, ни просмотр)
2. Если работа запрещена (например пользователь не зарегистрирован), то кнопка поиска на фрагменте поиска скрывается
3. Если работа запрещена (например пользователь не зарегистрирован), то сканер не инициализируется
3. Если работа запрещена, то списки устройств, локаций и т.д. не загружаются из БД, если до этого были уже загружены (в другом аккаунте), то списки удаляются
* <b>1.70 - 17/09/21</b>
1. Исправлена ошибка повторного открытия диалога статусов.
* <b>1.69 - 17/09/21</b>
1. Перерисованы кнопки генерации ID  и предыдущего значения
2. Для распознанного текста в RecognizeFragment сделан тёмный (контрастный) бэкграунд, раньше на светлом фоне текст сливался и был плохо различим
3. Добавлено: пользователь может выбрать в настройках — открывать диалог статусов сразу же после успешного распознания QR-кода.
* <b>1.68 - 16/09/21</b>
1. Исправлена ошибка нажатия кнопки "Назад" в момент включенного мультискана, когда ешё не найдено ни одного устройства: при нажатии включался рестарт сканирования вместо возвращения на вкладку "Поиск" (Пересканирование должно было включаться ТОЛЬКО если уже что-то найдено)
2. Добавлена активити "Настройки". Добавлен в боковое меню пункт соответствующий пункт. Добавлена настройка "выбора панели по умолчанию" и "автостарт ввода параметров"
3. Добавлена возможность пользователю выбрать, какая панель будет открываться при старте программы: так можно при запуске, например, сразу же приступать к сканированию, без выбора необходимой вкладки
4. На боковой менюшке для картинки добавлен отступ сверху, было некрасиво
* <b>1.67 - 15/09/21</b>
1. Добавлен ТрекID для поиска ремонтного устройства, чтение и сохранение его в БД. Если в ремонт приходят несколько устройств комплектом, то у них всех будет одинаковый ТрекID. TrackId выбирается в диалоге, после распознавания, сделана кнопка для генерации id, и кнопка для вставки id предыдущего устройства (если нужно сделать одинаковый id для всего комплекта)
* <b>1.66 - 14/09/21</b>
1. Улучшен диалог выбора мульти статуса (SelectStateDialogMulti) по аналогии с SelectStateDialogSingle
2. В диалоге SelectStateDialogMulti увеличена ширина элементов списка найденных устройств, добавлено поле названия текущего статуса, сам статус автоматом обновляется в элементе после успешной записи в БД
* <b>1.65 - 14/09/21</b>
1. Улучшено боковое меню: увеличена картинка и текст, название локации выделено цветом
2. Улучшен диалог выбора одиночного статуса (SelectStateDialogSingle): добавлены вкладки выбора режима диалога: простой и подробный (подробный — это прежний вид диалога). В простом режиме отображается ТОЛЬКО список выбора статуса устройства (в зависимости от локации и типа (серия/ремонт)) — так будет проще и быстрее, так как в большинстве случаев после сканирования нужно только обновить статус. Для вставки дополнительных данных можно всегда переключиться в расширенный режим. Выбранный режим диалога сохраняется и автоматом выбирается при последующем вызове диалога
3. Добавлен класс SaveLoad для работы с SharedPreferences
* <b>1.64 - 07/09/21</b>
1. В фильтр выбора устройств, в список названий комплектов добавлена строка "без комплекта". Когда выбрана, то отображаются устройства, которые не входят ни в один комплект
2. В фильтр выбора устройств, исправлено отображение списка названий устройств: названия были на английском (идентификаторы вместо имени)
3. В БД добавлены устройства (81 шт.) + комплекты (17 шт.)
* <b>1.63 - 22/07/21</b>
1. Добавлена библиотека Picasso для загрузки изображений, теперь это делать проще плюс загруженные изображения кэшируются
2. Добавлен imgPath в Device. Картинка хранится на хостинге AdjustmentWeb, в БД хранится путь к этой картинке. При изменении/добавлении картинки будет изменяться изображение в приложении БЕЗ обновления версии приложении
3. Теперь в списке найденных устройств отображается картинка устройства 
4. В диалог распознавания по наклейке и в диалоги сканирования QR добавлен выбор по комплекту, также добавлена зависимость выбора имени устройства от выбранного комплекта (при выбранном 1117М будут оторбражатьтся только устройства из этого комплекта)
5. Новая концепция комплектов: теперь это свойство юнита, а не девайса: теперь Бдкг-4 только один единственный, принадлежность к комплекту это свойство прибора с типом БДКГ-04, для серийных устройств комплект может и не быть задан, т.е. не известен наперед, со старым вариантом отдельного устройства (бдкг-04_срк) нужно было заранее знать к какому типу его отнести, а также не было очевидно, как искать по БД все -04 блоки, ведь они могут быть разных типов с одинаковым именем. У Девайса есть свойство possible_dev_set, т.е. возможные варианты комплекта (нужно для сортировки), в отличии от свойства юнита, где это свойство конкретно задано (или отсутствует)
6. Добавлено: добавление комплекта устройства (1117М, 6101 и т.д.)
7. В БД добавлено в devices свойство devset_id — это список ВОЗМОЖНЫХ комплектов у этого вида устройств (зная возможные комплекты теперь можно сортировать устройства по комплектам, причем устройство может относиться сразу к нескольким комплектам). Може быть не задано (нет комплектов), задано ("1117М") или задано несколько ("1117М&6101") 
* <b>1.62 - 12/07/21</b>
1. Исправлено: при добавлении сотрудника в юнит сохранялся его идентификатор имени, а не его id (name_id вместо id)
* <b>1.61 - 09/07/21</b>
1. Добавлена новая сущность DeviceSet, т.е. комплект устройств. Добавлены соответствующие Mutable, listener, getter etc.
2. В SpinnerAdapter добавлены методы для выборки устройств по типу их комплекта (например показывать только устройства для 1117М)
3. В диалог поиска добавлено выпадающее меню для типов комплектов. Если выбрано "-любой-", то в меню "Тип устройства" будут показываться все устройства, если выбрать "1117М", то только те, которые относятся к 1117М
4. Такая же система фильтра для имен устройств добавлена в RecognizeDialog, SelectStateDialogMulti, SelectStateDialogSingle 
* <b>1.60 - 07/07/21</b>
1. В элент списка статусов добавлено отображение количества дней в этом статусе
2. В диалоге SearchUnitParamsDialog (поиск по БД) выпадающее меню статусов сделано зависимым от выбраной локации И выбранного типа устройства (серия/ремонт). Для "-любой-" локации отображаются все статусы (в выбранном типе)
3. Удалил RecognizeActivity — она не использовалась, всё распознавалось через RecognizeDialog
4. В RecognizeDialog удален метод onRequestPermissionsResult
* <b>1.59 - 07/07/21</b>
1. Для элемента списка найденных в поиске по БД устройств добавлены поля "Ответственный" и "Локация". Если устройство завершено, то на элементе отображается соответствующая надпись
2. Для UnitInfoFragment: если устройство завершено, то на фрагменте появляется "печать" "ЗАВЕРШЕНО"
3. Для UnitInfoFragment и SingleScanFragment исправлено отображение имени устройства и имени ответственного: раньше показывал идентификатор вместо имени
* <b>1.58 - 06/07/21</b>
1. Добавлено: если добавить статус "Отправлено" или "Выдано", то устройство будет закрыто, ему добавляется дата закрытия, в синглСкан фрагменте появляется "печать" "ЗАВЕРШЕНО"
* <b>1.57 - 06/07/21</b>
1. Сокращение кода FireDBHelper
2. Добавлен лисенер для результатов сканирования мультисканера вместо метода загрузки списка найденых сканером юнитов: по факту — то же самое, но с добавлением автообновления списка найденных сканером устройств после записи новых данных для этих устройств (после нажатия "ОК" в списке сразу же меняются значения полей на новые, только что введенные даные)
3. saveUnitAndEvent(DUnit, DEvent) переделан в saveUnitAndEvent(DUnit): event — это всегда unit.getLastEvent()
4. В метод записи юнита в БД добавлено сохранение значений Location и State. Location и State не являются полями юнита и беруться из ивента. Сохранение этих полей в юнит нужно для поиска юнитов по этим значениям (локация и статус). При загрузке из БД эти поля игнорируются, таким образом эти 2 поля существуют только внутри БД
* <b>1.56 - 05/07/21</b>
1. Event сделан частью DUnit. Теперь последний ивент загружается из БД вместе с юнитом; обновление и закрытие ивента происходит через методы DUnit
2. Под новый DUnit переделаны RecognizeDialog, SelectStateDialogSingle, SelectStateDialogMulti 
3. Обновил getLastEventFromDB
4. Из Unit'a удален "state" и его геттеры/сеттеры: теперь статус — это параметр только события и никак не связан с юнитом  
* <b>1.55 - 01/07/21</b>
1. Добавлен горизонтальный лэйаут для fragment_single_scan и fragment_unit_info
* <b>1.54 - 30/06/21</b>
1. Удален один из двух перегруженных методов addSelectedUnitListener
2. SearchFragment теперь вложен внутрь SearchParent
3. UnitInfoActivity заменена на UnitInfoFragment(вся инфо для выбранного юнита + все его события), теперь никаких лишних активити, всё в одной. Логика кнопки "назад" с UnitInfoFragment: Если кликнуть в SearchFragment на пункт списка и открыть UnitInfoFragment, то нажатие на кнопку "назад" будет работать в обычном режиме, значит при нажатии будет закрываться UnitInfoFragment и возвращаться к SearchFragment. Если открыть ScanFragment при открытом UnitInfoFragment, то нажатие "назад" вернёт на UnitInfoFragment(!) 
* <b>1.53 - 29/06/21</b>
1. Для загрузки Employees из БД убран JOIN, так как всё равно для русского варианта имен (а employees используется только в AdjustmentDB, а значит ТОЛЬКО в русском варианте слов) name_id ВСЕГДА == name, поэтому JOIN делает только лишнюю работу
2. Переделан исправлен RecognizeActivity (добавлен выбор сотрудников, исправлены ошибки, список имен (варианты для распознования) теперь формируется как из английских имен так и русских (может быть и ПУ, и PU). В лэйаут для Recognize добавлено описание логики добавления новых данных
3. В Device добавлено поле engName, для английского варианта
* <b>1.52 - 29/06/21</b>
1. В SingleFragment добавлено отображение кол-ва дней в работе для выбранного юнита. Если юнит не закрыт, то считается количество дней от начала ремонта/серии до сегодняшнего дня, если юнит закрыт — до дня закрытия
2. В DUnit добавлено isComplete(), closeUnit(), daysPassed()
3. В Single и Multi добавлена возможность добавлять ответственного за ремонт/серию. 
4. В поиске добавлено: теперь можно искать устройства по имени ответственного
* <b>1.51 - 29/06/21</b>
1. Исправлено: NPE при создании нового юнита из qr-кода, если такого нет в БД, для SingleScan и для MultiScan
2. Исправлено; сканирование одиночного нового юнита из qr-кода в multiScan, которого нет в БД, не добавляло его в список найденных (Mutable не апдейтился) 
* <b>1.50 - 28/06/21</b> 
1. Обновление импортов (appcompat:1.3.0, firebase-firestore:23.0.1), исправления в коде (requireActivity, getLifeCycleOwner, getParentFragmentManager)
2. Так как теперь все 4 приложения работающие с БД уже не используют поле "name", а используют данные из таблицы "names" или свой внутренний словарь (как в AtomtexRepair), то поле "name" удалено из всех документов БД
3. Упорядочил SingleScanFragment
4. Если в QR-коде зашифрован несуществующее устройство или код сгенерирован неправильно или с неправильным ключем, то при попытке чтения такого кода приложение покажет соответствующее сообщение
* <b>1.49 - 28/06/21</b> 
1. Удалены старые неиспользуемые методы из FireDBHelper
2. Переделаны методы получения текущей локации по email пользователя: упрощено и без подключения к БД (так как объект пользователя и локации получается из БД уже при старте приложения)
3. Упрощен метод получения имени из БД (getStringFromSnapshot): прежний вариант применялся для нескольких вариантов локаций телефона, но это излишний функционал, пользователи будут использовать только русский язык
* <b>1.48 - 25/06/21</b> (Глобальное обновление)
1. Глобальное обновление. Теперь работа с БД выглядит так:
 * 1. Данные загружаются из БД; сущности (локация, статус, сотрудник, устройство) не имеют имен, только идентификаторы имени
 * 2. Сами имена для всех сущностей хранятся в отдельной таблице "names", у каждого имени есть варианты на других языках (исключая имена устройств — для них только варианты на русском и английском)
 * 3. В приложении есть соответствующие массивы объектов для каждого вида сущностей: locations, states, employees, devices. В объекте хранятся и имена, и их идентификаторы (и ещё разные данные)
 * 4. Эти массивы заполняются только при сработке соответствующих лисенеров, каждый из которых отслеживает изменения в соответствующей сущности таблице в БД ("devices", "locations", "employees", "states"). Таким образов данные в массивы загружаются из БД только при изменении данных (лисенер для локаций срабатывает только при изменениях в таблице "locations", на другие не обращает внимания) или при старте приложения — загрузке страницы (срабатывают все лисенеры)
 * 5. Массивы играют роль словарей и источников данных, из них формируются спиннеры, с их помощью переводятся идентификаторы в имена и обратно, это всё происходит БЕЗ обращения в БД
 * 6. Для заполнения спинеров данными, получения идентификаторов по выбранным пунктам и др, осуществляется через SpinnerAdapter
 * 7. В load методах в массивы загружаются объекты с данными из таблицы, в самих методах используется квази JOIN (firebase — это нереляционная БД, join там нет), чтобы после получения идентификаторов имен сразу же получить из таблицы "names" имена на нужном языке
 * 8. При загрузке юнитов и событий JOIN уже не нужен, данные для имен берутся через соответствующий метод (mViewModel.getLocationMameById(id), например)
 * 9. Теперь приложение полностью отвязано от полей "name" в БД, эти поля будут удалены из БД из всех документов
2. Добавил сказочно удобный в использовании класс SpinnerAdapter. Решает проблему хранения/получения имен/идентификаторов объектов при выборе позиции из спиннеров. Нужно, так как БД работает с идентификаторами, а в приложении отображаются реальные имена (могут быть на разных языках). Есть фильтр для отображения только тех статусов, которые подходят к выбранной локации и/или типу устройства; добавление "любого значения" первой строкой автоматом или вручную. 
3. Переделан SearchUnitParamDialog 115->68
4. Теперь статусы в спиннерах зависят от локации и типа устройства
5. Unit — убран desc, location, (state пока оставил, потом уберу), Инфо формируется  из Unit+Event. Добавлен eventId
6. Переделан SelectStateDialogSingle 
7. Переделан SelectStateDialogMulti 
8. В БД для events теперь название документа — это id ивента
9. Удалены ненужные лисенеры и Mutable
10. Исправлено: теперь в юните хранится дата его создания,  а не дата последнего события, т.е. теперь видно, сколько устройство дней в ремонте
* <b>1.47 - 12/05/21</b> (Версия не обновлялась)
1. Создан базовый класс Entity и наследующие его классы: Device, Employee, Location, State — подготовка к глобальному обновлению 
* <b>1.47 - 12/05/21</b>
1. при загрузке юнита отдельно загружать и его последний ивент. При сохранении нового события (ивента) в старый записывать дату закрытия события, в новый дату открытия.
* <b>1.46 - 07/05/21</b>
1. Исправлено: в диалогах SelectStateDialogSingle, SelectStateDialogMulti, RecognizeDialog раньше при сохранении юнита сохранялось имя устройство, а надо было идентификатор имени
2. Добавлено распознавание русскоязычных номеров
3. Для распознавания: теперь имена беруться из БД (ещё сортируются по имени в обратном порядке, чтобы сразу искался "6130С" и только потом "6130")
4. Для распознавания: добавлен поиск кирилических имен (пока только "БДКГ" и "БДКН")
5. Если у юнита уже задано имя устройства, то все поля с имененм скрываем. Если у юнита уже задан серийный номер, то все поля с серийным скрываем. Если у юнита уже задан и номер, и имя, то скрываем все поля И ОКНО КАМЕРЫ
6. Для всех спиннеров, в которых было пустое начальное значение (""), теперь добавляется не пустое, а конкретное "- любое -", или "- не выбрано -", в зависимости от ситуации. Сами значения сделаны, как константы
7. Если у устройства уже задано имя или серийный номер, то в окне распознавания текста будет выводится соответствующее сообщение. Сделано для того, чтобы в случае, когда номер у юнита уже есть и программа просто его и не ищет, пользователь не думал, почему сканер не распознает номер 
* <b>1.45 - 06/05/21</b>
1. Сделан диалог для распознавания текста: имя устройства и его серийный номер. При сканировании QR-кода, если найденное устройство это ремонт, то в панельке найденного устройства будет теперь доступна (кроме кнопки ручного выбора статуса/параметров) кнопка открытия диалога распознавания номера им имени устройства по его наклейке.
2. В диалоге распознавания добавлены поля ручного ввода параметров (на случай неуспешного распознавания наклейки). Если имя и/или серийный не выбраны, то юниту будут присвоены распознанные значения. Если параметры выбрать руками, то распознанные значения будут проигнорированы, юнит будет сохранен с параметрами выбранными вручную
3. Чтобы очистить распознанное значение, нужно тапнуть по нему
4. Пока распознавания только нескольких имен устройств (захардкодены, для тестирования), потом имена будут браться из БД (плюс ещё сделать сортировку по длине имени, чтобы сразу искался "6130С" и только потом "6130") 
* <b>1.44 - 05/05/21</b>
1. Исправлена ошибка падения при открытии диалога параметров поиска
2. Для диалогов сделан суперкласс, все диалоги наследуются от него
3. Допиливание кода SelectStateDialogSingle и SelectStateDialogMulti. Перерисованы диалоги для SelectStateDialogSingle и SelectStateDialogMulti 
* <b>1.43 - 04/05/21</b>
1. Добавил зум трансформер на переключение пейджера (чисто для красоты)
2. Переделал диалог параметров поиска (Dialog заменил на DialogFragment). Теперь вместо мелкого диалога нормальный большой диалог. Сам диалог запускается теперь без параметров (было: Activity, MainViewModel)
3. Добавил распознавание текста (пока для тестирования. Сейчас при сканировании наклейки среди всего текста находит и распознает серийный номер. Пока для английских наклеек)
* <b>1.42 - 27/04/21</b>
1. Перерисован элемент списка мультипоиска: показывает тип (серия/ремонт), имя, серийный и внутренний номер, идентификатор
2. В панель поиска добавлен поиск по серийному номеру и по названию статуса (события).
3. Нарисован новый диалог для параметров поиска. С главного экрана убрана панель поиска. Теперь параметры поиска перенесены в новый диалог поиска, а значит для вывода результатов поиска теперь доступен весь экран
4. Перезалил картинки в ReadMe
* <b>1.41 - 26/04/21</b>
1. Исправлено: при переводе имен статусов из их id использовались списки для текущей локации, поэтому статусы для других локаций не отображались. Теперь добавлен лисенер и загрузка для ВСЕХ статусов (для всех локаций и для всех типов: и ремонтных, и серийных). Потом надо буде сделать, чтобы переводчик брал данные из БД, а не загружал при старте весь список
2. Для DSerialUnitAdapter сделан клик лисенер (у recyclerView нет клик лисенера)
3. При клике на элемент списка найденных устройств открывается активити с отображением инфо об устройстве со списком всех событий этого устройства
4. Вывод списка событий сделан в обратном порядке (вверху самый последний ивент)
5. Перерисован элемент для списка событий, изменено расположение, цвета, добавлено поле имени локации для события
6. Для адаптера статусов добавлены переводчики лоакции и статуса
7. Исправлено: если открыть синглскан -> найти устройство -> нажать "Назад" -> вернуться на главный фрагмент -> перейти на синглскан, то опять отобразится инфл найденного прежде устройства (не обнулялся найденный юнит). Теперь запускается сканер
8. Event теперь из БД подгружает локацию
9. Переделаны некоторые методы: вместо DUnit ппараметром теперь берут String (id юнита)
10. Перезалил картинки в ReadMe
* <b>1.40 - 23/04/21</b>
1. Изменен элемент списка найденных устройств: изменен порядок и расположение элементов, серийный номер отображается большим размером чем другие элементы и окрашен оранжевым; отображается дата и время последнего события; отображается количество дней в последнем статусе
2. При сохранении нового статуса в БД, в юните сохраняется дата и время этой записи. Если юнит сохраняется БЕЗ сохранения статуса, то дата обновляться не будет  
* <b>1.39 - 22/04/21</b>
1. Исправлено: при открытой панеле статуса если перейти в мультискан, затем вернуться в синглскан, то будет отображаться инфо последнего открытого юнито (что верно), но при нажатии кнопки "назад" происходит возврат на экран поиска, а не пересканирование (что не верно). Теперь "назад" на синглСкане при закрытой панеле инфо возвращает на поиск, а при открытой инфо запускает пересканирование
2. В Utils добавлен переводчик с id на name, если id не находит в словаре, то возвращает EMPTY_VALUE ("- - -")
2. Переделан адаптер для списка найденых устройств: встроен переводчик id -> name   
* <b>1.38 - 22/04/21</b>
1. Сделан поиск устройств по БД. На главном экране в фильтре выбираются параметры для поиска: ответственный, локация, имя устройства и его тип (серия или ремонт). Если параметр не выбран, то это соответствует любому значению параметра (если выбрать только "Ремонт", то выведет все ремонтные устройства)
2. Найденные устройства выводятся в список. Если ничего не найдено, выводится соответствующее сообщение
3. Список серийных и список ремонтных объеденены в один список
4. Реализован перевод, по имени возвращает идентификатор: загружается список имен и список id (через лисенеры), метод Utils.getIdByName делает весь перевод 
* <b>1.37 - 21/04/21</b>
1. Вкадки переделаны через customView, теперь текст в 2 строки и на русском. В дальнейшем можно кастомизировать вкладки, на сколько хватит фантазии
2. Обновлены картинки в ReadMe
* <b>1.36 - 21/04/21</b>
1. Исправление ошибок работы диалога при добавлении устройства без статуса
2. Исправлено: после добавления новых данных в диалоге SelectStateDialogSingle и нажатия на "ок", на инфо панеле данные так и оставались прежними. Теперь при успешнов распознавании QR-кода в singleScan, добавляется лисенер на найденный юнит, другими словами: после того, как код отсканирован и открылась панель с данными на найденное устройство, любые изменения в данных этого устройства в БД немедленно отобразятся на панельке с данными
3. В диалог нового статуса для singleScan добавлен выбор имени устройства. Если имя уже задано, выбор отоьражаться не будет
4. Поменял кнопку "Найти" на экране поиска, старая немного бесила
5. Добавлен логотип на экран поиска
6. Перерисована панелька поиска
* <b>1.35 - 20/04/21</b>
1. Переделан диалог нового статуса для singleScan, теперь выглядит, как список лейбл:параметр. Отображается имя устройства, добавлены поля выбора серийного и внутреннего номера, поле ответственного. Если у устройства уже есть серийный или внутренний номер, то его уже нельзя поменять. Такие поля не будут вообще отображаться
2. Теперь можно выбрать пустой статус. Нужно когда, например, нужно просто добавить серийный номер устройству без добавления нового статуса
* <b>1.34 - 16/04/21</b> (Версия не обновлялась)
1. Исправления в лэйаутах диалогов и фрагментов
* <b>1.34 - 15/04/21</b>
1. Новый клас Utils для статических методов
2. Мультисканер теперь в момент распознавания юнитов автоматом сверяет их данные с БД, если такой найден, то данные обновляются и перезаписываются. Таким образом в списке найденых автоматом всегда данные для юнита из БД
3. В мультисканере добавлена кнопка "Next", при нажатии запускает диалог выбора статуса для группы устройств. Несуществующие юниты добавляются в БД, в существующих обновляются параметры
4. Если у юнита уже есть имя (название устройства), то оно не будет перезаписано (если выбраны несколько юнитов и у некоторых уже есть имя, а у других нет, то при закрытии диалога имя будет присвоено только тем юнитам, у которых не было имени)\
5. При нажатии "Назад" на мультиэкране при уже найденных устройствах происходит перезапуск сканирования
* <b>1.33 - 14/04/21</b>
1. В боковом меню отображается фото аккаунта
2. Добавлен пункт меню для смены аккаунта
3. При нажатии "Назад" на главном экране (поиск) вызывается окно с вопросом, закрывать ли приложение
4. При нажатии "Назад" на экране одиночного сканирования или экране множественного сканирования осуществляется переход на экран поиска
5. При нажатии "Назад" на экране одиночного сканирования при открытой инфо панели осуществляется рестарт одиносного сканирования
* <b>1.32 - 13/04/21</b>
1. Добавлено боковое меню. В шапке отображается версия приложения, локация пользователя, email пользователя
* <b>1.31 - 13/04/21</b> (Версия не обновлялась)
1. Удалены старые неиспользуемые классы и лэйауты
* <b>1.31 - 12/04/21</b>
1. MultiScanFragmentNew теперь не работает со сканером напрямую, а получает и передает данные через viewModel (пока не доконца отвязал фрагмент от логики, но в будущем всё будет по MVVM)
2. Рефакторинг
* <b>1.30 - 12/04/21</b>
1. Теперь из БД загружается не только список имен статусов, а ещё и список идентификаторов статусов. В БД сохраняются не имена статусов, а их идентификаторы
2. Лисенер для имен статусов (и ремонтный, и серийный) теперь передает в dbh два листа — для имен статусов и идентификаторов статусов
3. Переписан Scanner, теперь он отвязан от view и работает только с viewModel (через интерфейс). 
5. SingleScanFragmentNew теперь не работает со сканером напрямую, а получает и передает данные через viewModel (пока не доконца отвязал фрагмент от логики, но в будущем всё будет по MVVM)
4. Всё-таки отказался от словаря на TreeMap — вместо него 2 отдельный ArrayList, так удобнее и понятнее 
* <b>1.29 - 11/04/21</b>
1. Переписан Scanner и SingleScanFragment
* <b>1.28 - 08/04/21</b>
1. Глобальное обновление: переделана БД: переименованы таблицы: states -> events, users -> employees, dev_types -> devices, profiles -> states — наведен порядок в терминах, устранена путаница в названиях; таблицы repairs и serials объеденены в одну таблицу units. Переименованы поля, которые ссылаются на другие таблицы (location -> location_id). Во все таблицы кроме events добавлено поле id. Имя документа теперь совпадает с id этого документа (можно искать и по id, как и раньше, а можно просто брать документ по его названию, в абстракции имя документа есть его id, как если бы БД была не NoSQL, а SQL). Ещё: теперь все таблицы в БД не хранят значения из других таблиц, а хранят ссылки (id) на эти значения, т.е. приведены к какой-то там по счету форме. Переименование значений или добавление локализации больше не будет головной болью и костылями, всё решается теперь просто.
2. Соответственно переделано преложение под новую БД
3. Поиск устройства по его id теперь возвращает не список, а устройство (DUnit)
4. Удален класс DevType. Вместо него просто получаю из БД список стрингов
5. Отказался от конвертеров firebase, кода чуть больше, но более гибкий, что хочу, то и делаю 
* <b>1.27 - 05/04/21</b>
1. Глобальное обновление. Переделан интерфейс: теперь представляет собой ViewPager на 3 страницы вместе с TabLayout — одиночное сканирование, множественное сканирование и поиск устройства. Переключение между страницами свайпом
2. Убраны списки серийных и ремонтных устройств, теперь они НЕ БУДУТ отображаться, это не нужно. Вместо списков будет фильтр (страница "Поиск Устройства"), с помощью которого можно будет найти устройство в БД
3. В заголовках закладок отображается текст и иконка
4. Начал рисовать фильтр
* <b>1.26 - 02/04/21</b> (Версия не обновлялась)
1. Firebase user перенесен в viewModel. Теперь при при сиене фрагментов / ориентации не происходит перерегистрация
* <b>1.26 - 01/04/21</b>
1. В БД добавлена коллекция юзеров. Каждому юзеру соответствует его email (Google аккаунт) и конкретный профиль (локация, т.е. его юзера участок)
2. Добавлена коллеция локаций, теперь названия локаций хранится в БД, при добавлении / изменении локаций они автоматом изменятся на всех устройствах (пока после перезагрузки, потом добавлю лисенер) 
3. Добавлена авторизация по Google аккаунту. При запуске прогграммы приложение запрашивает в БД профиль, который соответствует этому аккаунту. Таким образом для каждого юзера будет доступный ему набор статусов, а значит юзер с регулировки не сможет добавить статус монтажа
4. На главном экране вверху теперь отображается email аккаунта и название локации
5. Удален enum Profile. Теперь профилей на устройстве нет, текущий профиль грузится из БД по имени аккаунта
6. Исправлена ошибка ViewModel: во фрагментах в конструкторе модели стоял this вместо getActivity, поэтому при открытии нового фрагмента модель создавалась заново (3 часа поиска причины, почему успешно загруженный лист данных при открытии диалога сбрасывался в null)
* <b>1.25 - 31/03/21</b>
1. Для DUnit добавлен параметр location (на каком участке находится) 
2. Реализована загрузка доступных статусов в зависиммости от выбранного профиля: от локации и от типа (ремонт/серия). Если статус "any" (одинаковый и для ремонта и для серии), то будет загружаться для любого типа  
* <b>1.24 - 31/03/21</b>
1. В БД переделана коллекция профилей. Была коллекция с вложенными в неё коллекциями статусов для каждого типа профиля (локации): profiles->adjustment_states->repair_states->s1. Теперь все статусы располагаются вместе в одной коллекции: profiles->s1 , каждый статус получил дополнительные поля "location" и "type". Теперь вся БД приведена к Нормальной Форме
2. Соответственно переделаны методы и лисенеры для работы с профилями и статусами 
* <b>1.23 - 30/03/21</b>
1. Глобально переделана БД. Вместо вложенных в каждый unit списков статусов теперь для ВСЕХ статусов используется ОДНА коллекция, выбор статусов для каждого юнита происходит по полю "unit_id", в которое при создании статуса заносится id текущего устройства
2. Удалены из БД коллекции "repair_states", "serial_states", коллекция "units" переименована в "serials"
3. Соответственно глобально переделаны методы для работы с изменившейся БД
4. Глобально переделаны методы в MainViewModel и FireDBHelper. Упрощено, сокращено, переделано
* <b>1.22 - 29/03/21</b>
1. Добавлены профили — монтаж, сборка, регулировка, приемка, градуировка.
2. Переделана архитектура: теперь вместо 2-х списков статусов (серия, ремонт) используется несколько списков, в зависимости от выбранного профиля. Так, если выбран профиль "Регулировка", то список статусов выбирается, как dbh.addStringArrayListener(<таблица_профилей>, <имя_документа_в_таблице_профилей>, <таблица_ремонт_или_серия>, <список_для_результата>, <имя_параметра>). Таким образом список статусов (при выборе в диалоге, например) зависит от выбранного профиля и от типа (серия или ремонт)
3. Диалог выбора статуса изменен: вместо списка теперь Спинер, а поле ввода убрано вообще — это была ошибка, так можно было добавить новый статус, который НЕЛЬЗЯ было бы выбрать в фильтре статусов — ведь список для фильтров формируется на основе списка статусов из БД
4. Для статуса теперь можно ещё добавить какое-либо описание (в произвольной форме)
5. Главный итог: теперь вместо списка статусов(на монтаже, на регулировке, кто-то взял...) список профилей (регулировка, сборка, градуировка...), у каждого профиля свой список статусов (диагностика, испытания, ...), также у некоторых профилей статусы различаются в зависимости ремонт это или серия  
* <b>1.21 - 26/03/21</b>
1. Добавлен звуковой сигнал при успешном распознании QR-кода
2. Доработан алгоритм распознования сразу нескольких QR-кодов — теперь распознаются сразу несколько, при наведении сразу на несколько кодов бывает распознаются сразу все 
* <b>1.20 - 25/03/21</b>
1. Переделана логика обработки строки, полученной от сканера
2. Добавлен режим распознования нескольких кодов подряд. Если навести камеру при включенном "Авто" режиме сразу на несколько QR-кодов, сканер распознает ВСЕ коды и занесет полученные юниты в коллекцию. Рукой даже не нужно будет двигать, все попавшие в экран коды будут поочередно распознаны, при этом БЕЗ повторных распознований
3. Количество распознанных устройств отображается в углу экрана
4. При каждом новом обнаруженном устройстве выводится новый пункт в списке найденных устройств
* <b>1.19 - 24/03/21</b>
1. ScannerFragment разделен на 2 класса ScannerFragment и Scanner. Теперь Scanner занимается конкретно сканированием QR-кода, парсингом и дешифровкой полученной строки. Классы сканирования и дешифровки закинул в отдельный package
* <b>1.18 - 23/03/21</b>
1. Вывод статусов в хронологическом порядке
* <b>1.17 - 23/03/21</b>
1. Добавлен значок в приложение
2. В DUnit добавлено поле "type", которое определяет, ремонтный блок или серийный. Вся логика переделана под использование getType, раньше для этого использовалось отдельное поле в viewModel
* <b>1.16 - 23/03/21</b> (Версия не обновлялась)
1. Нарисовал логотип (он же значок). PNG и PSD
* <b>1.16 - 22/03/21</b> (Версия не обновлялась)
1. Добавил описание в ReadMe.md
2. По-мелочи
* <b>1.16 - 21/03/21</b>
1. Добавлен лисенер для списка категорий текущего блока: при добавлении нового статуса через диалог этот статус НЕМЕДЛЕННО добавляется в списке статусов блока (точнее: при нажатии на "ОК" статус сохраняется в БД, сразу же после этого срабатывает лисенер, отслеживающий изменения в таблице статусов текущего блока и эти изменения сразу же загружаются в приложение)
* <b>1.15 - 21/03/21</b>
1. Переделан фрагмент сканирования часть 2.
2. Переделана логика распознавания: теперь открывается окно сканирования, если код распознан, то показывается лэйаут с информацией по устройству. Если у устройства есть статусы, то будет отображаться список всех статусов этого устройства. Снизу лэйаута находится кнопка, при нажатии на которую открывается диалог со списком доступных статусов (для ремонтного и серийного устройства различаются), из которого можно добавить новый статус для устройства. Вверху диалога есть EditText, в нем отображается выбранный статус, при необходимости можно вручную набрать свой статус. При нажатии "ОК" устройство с обновленными данными сохраняется в БД
* <b>1.14 - 19/03/21</b>
1. Переделан фрагмент сканирования.
2. При успешном распознании QR-кода выводится таблица статусов текущего устройства
3. Добавлен метод загрузки статуса текущего устройства (коллекция в коллекции). Создан адаптер для статусов
* <b>1.13 - 18/03/21</b>
1. На страницу сканнера добавлен список приборов. Соответствующие лисенеры и адаптеры. (С главной убрал). Данные из БД
2. Добавлены спиннеры: для выбора статуса ремонтных и для выбора статуса серийных приборов. Оба спиннера получают данные в реальном времени из базы данных
3. В зависимости оттипа прибора, ремонт или серия, отображается соответствующий спиннер
* <b>1.12 - 17/03/21</b>
1. На главную страницу добавлен список ремонтных приборов. Соответствующие лисенеры и адаптеры.
2. Для переключения между списками (серия и ремонт) добавлены табы
3. Добавлено отображение номера версии. Заменен значек камеры
* <b>1.11 - 09/03/21</b>
1. Добавлены методы для работы с ремонтными устройствами. При сканировании определяется: ремонт или серия и выполняются методы по ситуации
2. В DUnit добавлен String id, добвлены соответствующие методы  
3. В БД добавлена новая таблица: для ремонтных устройств. Теперь приложение выбирает, с какой из таблиц работать: с серией или с ремонтом
4. Добавлен Mutable для статуса ремонт или серия   
* <b>1.10 - 04/03/21</b>
1. Добавлено: так как теперь строка в QR-коде будет закодированной (в генератор добавлен кодировщик, см. папку "qrscanner" в AdjustmentWeb), то теперь в приложении при считывании строки сразу же запускается процесс дешифровки (класс Encrypter)
* <b>1.09 - 26/02/21</b>
1. Изменена кнопка добавления в БД — теперь большая оранжевая с закругленными углами. Надпись на кнопки меняется: "Нет данных", "Добавить в БД", "Обновить данные в БД"
2. Надпись при распознавании уменьшена и перемещена в угол
* <b>1.08 - 26/02/21</b>
1. Для FireDBHelper конструктор переделан в конструктор без параметров, Mutable передается методам в классе FireDBHelper как параметр
2. Переделан метод загрузки в БД (addElementToDB): теперь, если документ не существует, он будет создан, если документ существует, его содержимое будет перезаписано вновь предоставленными данными
3. При успешном сканировании qr-кода отправляется запрос в БД на наличие такого устройства в БД (по имени и внутреннему серийнику), и, если оно найдено в форму загружаются данные из БД для этого устройства.
4. В список статусов добавлен "-- не выбрано --", который отображается по умолчанию, если он выбран, поле статуса пустое будет пустым 
* <b>1.07 - 26/02/21</b>
1. Добавил ReadMe.md и Version.md
2. Добавил Спиннер для выбора статуса прибора (на линейке, на сборке) и соответствующий лисенер, адаптер и массив данных. При выборе значения в спинере, это значение вставляется в поле данных
3. В DUnit добавлен внутренний серийник и статус, в адаптеры и лэйауты добавлены соответстыующие поля
4. В фрагменте сканнера добавлены поясняющие надписи, новые поля ввода; поля сделаны неактивными; добавлена кнопка включения/выключения режима редактирования полей ввода
5. Приложение теперь в темной теме и без ActionBar
* <b>1.06 - 24/02/21</b>
1. Вывод результата распознавания на SurfaceView
* <b>1.05 - 22/02/21</b>
1. Немного навел порядок
* <b>1.04 - 22/02/21</b>
1. Сделал парсер, окно сканнера и добавление в БД теперь в отдельном фрагменте 
* <b>1.03 - 22/02/21</b>
1. Добавлен фрагмент с QR-сканером. Сканирует QR-код и получает стринг, потом сделаю парсер
* <b>1.02 - 22/02/21</b>
1. Добавлен RecyclerView со всеми холдерами и адаптерами
2. При старте RecyclerView заполняется данными с БД, при добавлении данных в БД НЕ ИЗ ТЕКУЩЕГО ПРИЛОЖЕНИЯ RecyclerView приложение автоматически загружает данные с БД и обновляет RecyclerView (срабатывает лисенер)
* <b>1.01 - 21/02/21</b>
1. Добавлен лисенер изменений в FireStorage БД. При изменениях запускается загрузка данных
2. Данные храняться как Mutable<ArrayList<DUnit>>
